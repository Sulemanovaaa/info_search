








OpenNews: Выпуск nginx 1.15.10 и njs 0.3.0

var topnews=[

];


    
  var raw_nowtime=1554661165;











Профиль: Аноним (вход | регистрация)












НОВОСТИ (+)

КОНТЕНТ

WIKI

MAN'ы

ФОРУМ


Поиск (теги)




     



    .hdr_mobile {
	text-align: center; 
	display: none;
	margin: 0px;
	padding: 0px;
    }







[ новости /+++ | форум | wiki | теги
| 
]





















Выпуск nginx 1.15.10 и njs 0.3.0

26.03.2019 20:47




Доступен выпуск основной ветки nginx 1.15.10, в рамках которой продолжается развитие новых возможностей (в параллельно поддерживаемой стабильной ветке 1.14 вносятся только изменения, связанные с устранением серьёзных ошибок и уязвимостей).

Основные изменения:

 При использовании имени хоста в директиве listen, nginx теперь создаёт listen-сокеты для всех адресов, соответствующих этому имени (в ранних версиях использовался только первый адрес);
 В директиве listen появилась возможность указания диапазонов портов;
 Добавлена возможность загрузки SSL-сертификатов и секретных ключей из переменных без использования промежуточных файлов;
 Устранена проблема с не заполнением переменной $ssl_server_name при  использовании OpenSSL 1.1.1;
 Исправлена ошибка сборки nginx под Windows при использовании Visual Studio 2015 и новее.

Дополнительно можно отметить выпуск njs 0.3.0, интерпретатора языка JavaScript для веб-сервера nginx. Интерпретатор njs реализует стандарты ECMAScript и позволяет расширять возможности nginx по обработке запросов с помощью скриптов в конфигурации. Скрипты могут использоваться в файле конфигурации для определения расширенной логики обработки запросов, формирования конфигурации, динамической генерации ответа, модификации запроса/ответа или быстрого создания заглушек с решением проблем в web-приложениях. В новом выпуске njs добавлена поддержка модулей, определённых в спецификации ECMAScript 6. Также предложена новая директива js_path и реализована функция  Object.prototype.propertyIsEnumerable().










исправить  
+7 +/–





Главная ссылка к новости (http://mailman.nginx.org/piper...)
OpenNews: Компания F5 Networks поглотила NGINX за 670 млн долларов
OpenNews: Выпуск сервера приложений NGINX Unit 1.8 с поддержкой Java
OpenNews: Выпуск nginx 1.15.9
OpenNews: Релиз njs 0.2.5, интерпретатора JavaScript от NGINX


Автор новости: eRIC
Тип: Программы
Ключевые слова: njs, nginx
При перепечатке указание ссылки на opennet.ru обязательно




Обсуждение
Ajax/Линейный | Раскрыть все сообщения |  
RSS




 

1.1, Чёртик (?), 23:41, 26/03/2019  [ответить] [показать ветку] [···]    [к модератору] 
–5 +/–
Что, они ещё один интерпретатор js родили? Уже ж есть отличный duktape (https://github.com/svaarala/duktape), spider monkey, libv8 на крайняк.
 

 
2.2, аноннн (?), 23:59, 26/03/2019 [^] [ответить]    [к модератору] 
+4 +/–
им нужен не громоздкий, а узконаправленный, быстрый и встраиваемый интерпретатор, а не монстры
 
 
3.23, Организация Объединённых Тюленей (?), 14:07, 27/03/2019 [^] [ответить]    [к модератору] 
+/–
duktape, ЕМНИП, как раз для таких дел и предназначен.
 

2.3, zzz (??), 00:18, 27/03/2019 [^] [ответить]    [к модератору] 
+4 +/–
Про V8 Сысоев писал 9 лет назад, с тех пор ничего не поменялось http://sysoev.ru/prog/v8.html
 
2.4, Алеша (?), 00:59, 27/03/2019 [^] [ответить]    [к модератору] 
+/–
Вот несколько же это нужно быть, ээмм... недалёким, что бы не понимать, что браузерный интерпретатор js, предназначенный обрабатывать в лучшем случае десятки запросов в секунду (и реально обрабатывающий единицы), это несколько иное, чем серверный, где их реально сотни тысяч и миллионы обрабатываются??
 
 
3.5, Аноним (5), 01:10, 27/03/2019 [^] [ответить]    [к модератору]  s_n_a(1553631029,'Аноним')
+/–
Ну, ту же ноду докостылили до весьма приемлемых результатов.
 
 
4.28, Аноним (28), 21:57, 27/03/2019 [^] [ответить]    [к модератору]  s_n_a(1553705828,'Аноним')
+/–
У ноды один контекст на все соединения, nginx же создает новый на каждое соединение.
 

3.6, Аноним (6), 01:15, 27/03/2019 [^] [ответить]    [к модератору]  s_n_a(1553631301,'Аноним')
–2 +/–
V8 на ноде норм обрабатывает запросы по 10K/c на ядро. Чем njs лучше?
 
 
4.10, Аноним (10), 09:28, 27/03/2019 [^] [ответить]    [к модератору]  s_n_a(1553660913,'Аноним')
+/–
У них разные области применения. Судя по анонсу njs, там даже сборщика мусора нет.
 

3.7, Аноним (7), 02:24, 27/03/2019 [^] [ответить]    [к модератору]  s_n_a(1553635458,'Аноним')
+/–
V8 в сотни раз быстрее njs будет.
 
 
4.8, Аноним (8), 08:55, 27/03/2019 [^] [ответить]    [к модератору]  s_n_a(1553658955,'Аноним')
+3 +/–
Ваша вера недостаточно крепка: V8 быстрее в тысячи раз!
 
 
5.12, eRIC (ok), 09:43, 27/03/2019 [^] [ответить]    [к модератору]  s_n_a(1553661797,'eRIC')
+3 +/–
> Ваша вера недостаточно крепка: V8 быстрее в тысячи раз!
яблоки и бананы сравниваете.
njs - это подмножество языка JavaScript, позволяющее расширить функциональность nginx. он никак не претендует на роль монстра V8. его задача, тупо сриптингом расширить функционал nginx. хочешь конфигурировать/функцию расширить nginx на лету при помощи JavaScript, пожалуйста используй.
как это делают других продукты, но в основном там Lua используют:
haproxy - расширяется при помощи Lua
tarantool - расширяется при помощи Lua
rspamd - расширяется при помощи Lua
redis - С/C++/Lua/JavaScript
.....
.....
.....
ИМХО, я лично не сторонник njs и немного скептически отношусь.

 
 
6.13, Алексей (??), 09:50, 27/03/2019 [^] [ответить]    [к модератору]  s_n_a(1553662255,'Алексей')
+/–
И для nginx тоже есть lua :) 
 
 
7.17, eRIC (ok), 12:10, 27/03/2019 [^] [ответить]    [к модератору]  s_n_a(1553670602,'eRIC')
+/–
> И для nginx тоже есть lua :) 
да как отдельный сторонний модуль, а тут речь идет из коробки от самого производителя софта
 

6.14, Аноним (8), 09:53, 27/03/2019 [^] [ответить]     [к модератору]  s_n_a(1553662419,'Аноним')+/–Комментарий выше как бы намекает, что в исходном сообщении был представлен не ан... весь текст скрыт [показать] 







1.9, Ilya Indigo (ok), 09:15, 27/03/2019  [ответить] [показать ветку] [···]    [к модератору]  s_n_a(1553660132,'Ilya Indigo')
–1 +/–
А про модуль для PHP ни чего не слышно?
 

 
2.11, eRIC (ok), 09:31, 27/03/2019 [^] [ответить]    [к модератору]  s_n_a(1553661113,'eRIC')
+/–
> А про модуль для PHP ни чего не слышно?
? первый раз слышу, а для чего?
 
 
3.15, Ilya Indigo (ok), 10:20, 27/03/2019 [^] [ответить]    [к модератору]  s_n_a(1553664039,'Ilya Indigo')
+/–
>> А про модуль для PHP ни чего не слышно?
> ? первый раз слышу, а для чего?
https://www.opennet.ru/opennews/art.shtml?num=49643
Обещали, что он будет быстрее чем php-fpm.
Очень интересна его судьба и прочие особенности.
 
 
4.18, eRIC (ok), 12:14, 27/03/2019 [^] [ответить]    [к модератору]  s_n_a(1553670858,'eRIC')
+2 +/–
> https://www.opennet.ru/opennews/art.shtml?num=49643 
> Обещали, что он будет быстрее чем php-fpm.
> Очень интересна его судьба и прочие особенности.
сторонний модуль к nginx, не шупал и ничего не могу сказать. бенчмарки смотреть надо, да страница описывает разницу от обычного PHP:
What's different with official php
    Global variable is unsafe in per request
    Static variable of a class is unsafe in per request
    Do not design singleton mode
    The native IO function works fine, but it slows down nginx

 
 
5.20, Ilya Indigo (ok), 12:41, 27/03/2019 [^] [ответить]    [к модератору]  s_n_a(1553672511,'Ilya Indigo')
+/–
Описание страшное.
Благодарю!
 



2.16, KonstantinB (ok), 12:09, 27/03/2019 [^] [ответить]    [к модератору]  s_n_a(1553670592,'KonstantinB')
+1 +/–
А зачем он вам?
В nginx можно выполнять только неблокирующие операции. Любой условный mysql_query подвесит весь воркер nginx-а.
Смысл подобных модулей в простейших неблокирующих обработчиках, для которых не хватает встроенных возможностей nginx. Например, полноценно распарсить Accept-Language и сделать соответствующий редирект (регулярками этого полноценно - в полном соответствии с RFC - не сделать). Эти 5-10 строк кода можно написать и на подмножестве js и на lua даже толком не зная этих языков.
Если вам нужно "как fpm, только шустрее", посмотрите в сторону nginx unit.
 
 
3.19, Ilya Indigo (ok), 12:28, 27/03/2019 [^] [ответить]    [к модератору]  s_n_a(1553671686,'Ilya Indigo')
+/–
> А зачем он вам?
Мне бы вообще-то как в Apache-event + PHP7-FastCGI, только по шустрее со статикой.
> В nginx можно выполнять только неблокирующие операции. Любой условный mysql_query подвесит 
> весь воркер nginx-а.
> Смысл подобных модулей в простейших неблокирующих обработчиках, для которых не хватает 
> встроенных возможностей nginx.
То есть он вообще не замена nginx + php-fpm?
Благодарю, nginx unit, взял на заметку.
P.S. А nginx unit точно шустрее nginx + php-fpm?
Судя по его описанию и назначению - это комбайн с кучей поддерживаемых языков, но про шустрость и речи нигде не шло?
 
 
4.21, eRIC (ok), 13:28, 27/03/2019 [^] [ответить]    [к модератору]  s_n_a(1553675311,'eRIC')
+2 +/–
> P.S. А nginx unit точно шустрее nginx + php-fpm?
> Судя по его описанию и назначению - это комбайн с кучей поддерживаемых 
> языков, но про шустрость и речи нигде не шло?
unit с приложением php = nginx + php-fpm, разница в том что в unit нет деление сервера и отдельного стороннего запущенного php-fpm. php приложение в unit выполняется в отдельном своем контексте без обращения к отдельно запущеного php-fpm демона. таких приложений может быть куча, и каждый вариться в своем казане и не мешает друг другу.
касательно бенчмарка, нужно производить замеры и смотреть. unit по сути еще зеленый продукт, который постепенно развивается
 
 
5.22, Ilya Indigo (ok), 13:39, 27/03/2019 [^] [ответить]    [к модератору]  s_n_a(1553675995,'Ilya Indigo')
+/–
Благодарю Вас за подробный ответ! :-)
 

4.29, KonstantinB (ok), 10:06, 28/03/2019 [^] [ответить]    [к модератору]  s_n_a(1553749607,'KonstantinB')
+1 +/–
Суть nginx unit в том, что обмен данными между приложением и сервером происходит через shared memory, что несколько быстрее, чем гонять через сокеты.
Сам PHP от этого быстрее, конечно, не станет. :-)
А для статики лучше всего выделить отдельный IP-адрес и субдомен. Впрочем, если у вас нагрузки не как у Фейсбука, лишнего проксирования вы и не заметите (но тогда и со схемой nginx+php-fpm тоже все нормально должно быть).
 
 
5.30, Ilya Indigo (ok), 10:42, 28/03/2019 [^] [ответить]    [к модератору]  s_n_a(1553751765,'Ilya Indigo')
+/–
> Суть nginx unit в том, что обмен данными между приложением и сервером 
> происходит через shared memory, что несколько быстрее, чем гонять через сокеты. 
Благодарю за ответ, буду пробовать!
> Сам PHP от этого быстрее, конечно, не станет. :-) 
PHP7 уже давным давно не является узким местом в быстродействии веб-приложений.
> А для статики лучше всего выделить отдельный IP-адрес и субдомен.
Под статикой я имею ввиду, не только отдельные документы (html, css, js, jpg), но и когда выключен режим PHP (закрыт тег ?>), и я отдаю чистый HTML.
Отделить строго статику, я даже не понимаю как, возможно это и не возможно.
Например загружаемые пользователями картинки, которые отдаваться будут через Apache/nxinx.
С одной стороны это статика, но с другой она должна быть на том же сервере, где и динамика, так нужно иметь возможность загружать и удалять их.
В некоторых JS должны быть определены константы и объекты, через PHP (ID, флаг владельца, языковой словарь, разные списки).
> у вас нагрузки не как у Фейсбука, лишнего проксирования вы и 
> не заметите (но тогда и со схемой nginx+php-fpm тоже все нормально 
> должно быть).
Да у меня и с Apache-event/php-FastCGI всё нормально, просто знаю, что nginx лучше использует ресурсы сервера, и от него можно добиться больше при минимальных затратах (сменить apache на nginx, но не делать отдельный сервер для статики) (даже если пока это не нужно).
 






1.24, robot228 (?), 15:44, 27/03/2019  [ответить] [показать ветку] [···]    [к модератору]  s_n_a(1553683488,'robot228')
+/–
Посоветуйте вводную литературу по изучению NGINX.
 

 
2.25, Andrey Mitrofanov (?), 16:41, 27/03/2019 [^] [ответить]    [к модератору]  s_n_a(1553686892,'Andrey Mitrofanov')
–4 +/–
> Посоветуйте вводную литературу по изучению NGINX.
REAMDE.
 
2.27, eRIC (ok), 20:24, 27/03/2019 [^] [ответить]    [к модератору]  s_n_a(1553700240,'eRIC')
+1 +/–
> Посоветуйте вводную литературу по изучению NGINX.
https://docs.nginx.com/nginx/admin-guide/installing-nginx/installing-nginx-ope
 



1.26, Аноним (26), 19:31, 27/03/2019  [ответить] [показать ветку] [···]    [к модератору]  s_n_a(1553697087,'Аноним')
–1 +/–
есть же lua, js не нужен
 



1.31, тигар (ok), 23:06, 28/03/2019  [ответить] [показать ветку] [···]    [к модератору]  s_n_a(1553796410,'тигар')
+1 +/–
ладно, а вебинар кто-нить наблюдал? чего будет с nginx теперь, после того как их ф5 купили? 
Раньше Emily Turner все рассказывала как при помощи nginx можно избавиться от F5 Big-IP.. А потом вот нежданчик:\
 

 
2.32, eRIC (ok), 08:36, 29/03/2019 [^] [ответить]    [к модератору]  s_n_a(1553830597,'eRIC')
+/–
> ладно, а вебинар кто-нить наблюдал? чего будет с nginx теперь, после того 
> как их ф5 купили?
https://www.youtube.com/watch?v=E5AZ7T5OykU
 
2.33, Andrey Mitrofanov (?), 09:24, 29/03/2019 [^] [ответить]     [к модератору]  s_n_a(1553833487,'Andrey Mitrofanov')+/–Вот    Это правильный вопрос        который надо было задать, когда они инкорпар... весь текст скрыт [показать] 




var hidden_msg = new Array(0,14,33); 
var hidden_idx = new Array(0,1,2,2,2,2,3); 
if (text_type == 1){ open_block(116926,3,hidden_msg,1);}




 Добавить комментарий











Имя:
E-Mail:
Заголовок:
Текст:






setup_nick();



load_topnews(1);












    var re = new RegExp('Android|Mobile|Opera Mini','');
    if (navigator.userAgent && re.exec(navigator.userAgent) == null){
	(adsbygoogle = window.adsbygoogle || []).push({});
    }




Навигация




     
Фильтры
    События
    Обзоры и статьи
    Программы
    Уязвимости
    Исключить Linux
    Исключить BSD
    ----- Формат вывода
    10 полных
    20 сокращенных
    40 заголовков
    


 Каналы:      
 Разделы новостей | Сводные
 Что нового на OpenNet
 Поиск в новостях
 Новые комментарии
 Добавить свою новость



load_topnews(2);


Важное


- 06.04 Новая криптографическая библиотека EverCrypt с математическим доказательством надёжности (82 +13)
- 04.04 Sisvel формирует патентный пул для сбора отчислений за использование кодеков AV1 и VP9 (169 –43)
- 28.03 Mozilla развивает WASI для использования WebAssembly вне браузера (114 +10)
- 13.03 Выпуск пользовательского окружения GNOME 3.32 (242 +27)
- 06.03 SPOILER - новая атака на механизм спекулятивного выполнения CPU Intel (199 +44)



Советы


- 03.04 Объединение томов через aufs для отказоустойчивости и моментального восстановления 
- 31.03 vmhgfs в старых CentOS и RHEL
- 30.03 Связывание повторяемых сборок GNU Guix с архивом исходных текстов  Software Heritage
- 14.03 Использование slackpkg для chroot
- 03.03 Как сделать пометку ошибок правописания в Firefox более заметной



Обсуждаемые новости


- 20:56 В рамках проекта HermiTux развивается unikernel, бинарно сов (61)
- 20:51 Новая криптографическая библиотека EverCrypt с математически (82)
- 20:50 Сообщество Blender выпустило свободный анимационный фильм Sp (81)
- 20:49 Выпуск проекта DXVK 1.1 с реализацией Direct3D 10/11 поверх  (16)
- 20:46 Выпуск интегрированной среды разработки Apache NetBeans 11.0 (75)
- 20:02 Goldman Sachs намерен открыть код некоторых приложений для т (23)
- 20:00 Доступен файловый менеджер GNOME Commander 1.10 (76)
- 19:48 Вышел AV Linux 2019.4.10, дистрибутив для создания аудио и в (38)
























  Закладки на сайте
  Проследить за страницей



Created 1996-2019 by Maxim Chirkov  
Добавить, Поддержать, Вебмастеру, ГИД  











  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-123449-1', 'auto');
    ga('send', 'pageview');





